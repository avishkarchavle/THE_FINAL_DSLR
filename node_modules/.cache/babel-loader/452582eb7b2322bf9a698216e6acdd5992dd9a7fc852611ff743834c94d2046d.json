{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\grish\\\\OneDrive\\\\Desktop\\\\tpdslr\\\\dslrbackup-main\\\\src\\\\components\\\\SignLanguageRecognition.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SignLanguageRecognition = () => {\n  _s();\n  const [mediaRecorder, setMediaRecorder] = useState(null);\n  const [videoInput, setVideoInput] = useState(null);\n  const [prediction, setPrediction] = useState('');\n  const [isRecording, setIsRecording] = useState(false);\n  const [isSpeaking, setIsSpeaking] = useState(false);\n  const videoRef = useRef(null);\n  const speechSynthesisRef = useRef(window.speechSynthesis);\n  const utteranceRef = useRef(null);\n  const handleVideoChange = event => {\n    const file = event.target.files[0];\n    setVideoInput(file);\n    console.log(\"Video file selected: \", file);\n  };\n  const handleStopWebcam = () => {\n    if (mediaRecorder && mediaRecorder.state !== 'inactive') {\n      mediaRecorder.stop();\n      setMediaRecorder(null);\n      setIsRecording(false);\n      if (videoRef.current && videoRef.current.srcObject) {\n        const stream = videoRef.current.srcObject;\n        const tracks = stream.getTracks();\n        tracks.forEach(track => track.stop());\n        videoRef.current.srcObject = null;\n      }\n    }\n  };\n\n  // Inside the handlePredict function in your SignLanguageRecognition component\n\n  const handlePredict = async () => {\n    try {\n      const formData = new FormData();\n      if (videoInput instanceof Blob) {\n        formData.append('video', videoInput, 'video.webm');\n        console.log(\"Video blob appended to formData\");\n      } else {\n        alert('Please provide a video input');\n        return;\n      }\n      console.log(\"Sending request to backend...\");\n      const response = await axios.post('http://localhost:5001/predict', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      console.log(\"Response received: \", response.data);\n      setPrediction(response.data.prediction); // Update the prediction state\n      speakText(response.data.prediction);\n    } catch (error) {\n      console.error('Error predicting:', error);\n    }\n  };\n  const speakText = text => {\n    utteranceRef.current = new SpeechSynthesisUtterance(text);\n    speechSynthesisRef.current.speak(utteranceRef.current);\n    setIsSpeaking(true);\n  };\n  const stopSpeaking = () => {\n    if (isSpeaking) {\n      speechSynthesisRef.current.cancel();\n      setIsSpeaking(false);\n    }\n  };\n  useEffect(() => {\n    const synth = speechSynthesisRef.current;\n    return () => {\n      if (isSpeaking) {\n        synth.cancel();\n      }\n    };\n  }, [isSpeaking]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"display-4 mb-4\",\n      children: \"Sign Language Recognition\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Upload Video:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: \"video/*\",\n        onChange: handleVideoChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }, this), isRecording && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-3\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-danger\",\n        onClick: handleStopWebcam,\n        children: \"Stop Webcam\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-3\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-success\",\n        onClick: handlePredict,\n        children: \"Predict\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, this), prediction && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Prediction: \", prediction]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `btn ${isSpeaking ? 'btn-danger' : 'btn-success'}`,\n        onClick: () => {\n          if (isSpeaking) {\n            stopSpeaking();\n          } else {\n            speakText(prediction);\n          }\n        },\n        children: isSpeaking ? 'Stop Speaking' : 'Speak'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }, this), isRecording && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-3\",\n      children: /*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        width: \"640\",\n        height: \"480\",\n        autoPlay: true,\n        playsInline: true,\n        muted: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 9\n  }, this);\n};\n_s(SignLanguageRecognition, \"drACryVGDCfxk6kKA6LleWVZVCA=\");\n_c = SignLanguageRecognition;\nexport default SignLanguageRecognition;\nvar _c;\n$RefreshReg$(_c, \"SignLanguageRecognition\");","map":{"version":3,"names":["React","useRef","useState","useEffect","axios","jsxDEV","_jsxDEV","SignLanguageRecognition","_s","mediaRecorder","setMediaRecorder","videoInput","setVideoInput","prediction","setPrediction","isRecording","setIsRecording","isSpeaking","setIsSpeaking","videoRef","speechSynthesisRef","window","speechSynthesis","utteranceRef","handleVideoChange","event","file","target","files","console","log","handleStopWebcam","state","stop","current","srcObject","stream","tracks","getTracks","forEach","track","handlePredict","formData","FormData","Blob","append","alert","response","post","headers","data","speakText","error","text","SpeechSynthesisUtterance","speak","stopSpeaking","cancel","synth","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","accept","onChange","onClick","ref","width","height","autoPlay","playsInline","muted","_c","$RefreshReg$"],"sources":["C:/Users/grish/OneDrive/Desktop/tpdslr/dslrbackup-main/src/components/SignLanguageRecognition.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\nimport axios from 'axios';\n\nconst SignLanguageRecognition = () => {\n    const [mediaRecorder, setMediaRecorder] = useState(null);\n    const [videoInput, setVideoInput] = useState(null);\n    const [prediction, setPrediction] = useState('');\n    const [isRecording, setIsRecording] = useState(false);\n    const [isSpeaking, setIsSpeaking] = useState(false);\n\n    const videoRef = useRef(null);\n    const speechSynthesisRef = useRef(window.speechSynthesis);\n    const utteranceRef = useRef(null);\n\n    const handleVideoChange = (event) => {\n        const file = event.target.files[0];\n        setVideoInput(file);\n        console.log(\"Video file selected: \", file);\n    };\n\n    const handleStopWebcam = () => {\n        if (mediaRecorder && mediaRecorder.state !== 'inactive') {\n            mediaRecorder.stop();\n            setMediaRecorder(null);\n            setIsRecording(false);\n\n            if (videoRef.current && videoRef.current.srcObject) {\n                const stream = videoRef.current.srcObject;\n                const tracks = stream.getTracks();\n                tracks.forEach(track => track.stop());\n                videoRef.current.srcObject = null;\n            }\n        }\n    };\n\n    // Inside the handlePredict function in your SignLanguageRecognition component\n\nconst handlePredict = async () => {\n    try {\n        const formData = new FormData();\n        if (videoInput instanceof Blob) {\n            formData.append('video', videoInput, 'video.webm');\n            console.log(\"Video blob appended to formData\");\n        } else {\n            alert('Please provide a video input');\n            return;\n        }\n\n        console.log(\"Sending request to backend...\");\n        const response = await axios.post('http://localhost:5001/predict', formData, {\n            headers: {\n                'Content-Type': 'multipart/form-data',\n            },\n        });\n\n        console.log(\"Response received: \", response.data);\n        setPrediction(response.data.prediction); // Update the prediction state\n        speakText(response.data.prediction);\n    } catch (error) {\n        console.error('Error predicting:', error);\n    }\n};\n\n\n    const speakText = (text) => {\n        utteranceRef.current = new SpeechSynthesisUtterance(text);\n        speechSynthesisRef.current.speak(utteranceRef.current);\n        setIsSpeaking(true);\n    };\n\n    const stopSpeaking = () => {\n        if (isSpeaking) {\n            speechSynthesisRef.current.cancel();\n            setIsSpeaking(false);\n        }\n    };\n\n    useEffect(() => {\n        const synth = speechSynthesisRef.current;\n        return () => {\n            if (isSpeaking) {\n                synth.cancel();\n            }\n        };\n    }, [isSpeaking]);\n\n    return (\n        <div className=\"container mt-5\">\n            <h2 className=\"display-4 mb-4\">Sign Language Recognition</h2>\n            <div className=\"mb-3\">\n                <label>Upload Video:</label>\n                <input type=\"file\" accept=\"video/*\" onChange={handleVideoChange} />\n            </div>\n            {isRecording && (\n                <div className=\"mb-3\">\n                    <button className=\"btn btn-danger\" onClick={handleStopWebcam}>\n                        Stop Webcam\n                    </button>\n                </div>\n            )}\n            <div className=\"mb-3\">\n                <button className=\"btn btn-success\" onClick={handlePredict}>\n                    Predict\n                </button>\n            </div>\n            {prediction && (\n                <div className=\"mt-3\">\n                    <p>Prediction: {prediction}</p>\n                    <button\n                        className={`btn ${isSpeaking ? 'btn-danger' : 'btn-success'}`}\n                        onClick={() => {\n                            if (isSpeaking) {\n                                stopSpeaking();\n                            } else {\n                                speakText(prediction);\n                            }\n                        }}\n                    >\n                        {isSpeaking ? 'Stop Speaking' : 'Speak'}\n                    </button>\n                </div>\n            )}\n            {isRecording && (\n                <div className=\"mt-3\">\n                    <video\n                        ref={videoRef}\n                        width=\"640\"\n                        height=\"480\"\n                        autoPlay\n                        playsInline\n                        muted={true}\n                    />\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default SignLanguageRecognition;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}